var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function o(e,t,o=window,n=300,s=5){let l=(...e)=>o.document.addEventListener(...e),r=(...e)=>o.document.removeEventListener(...e);const a="ontouchstart"in o.document.documentElement;let i=0,u=[],d=null,p={x:0,y:0},m={x:0,y:0},c=!1,h=(o,n)=>{t({type:o,touch:a,width:e.clientWidth,height:e.clientHeight,move:{x:0,y:0},pos:{x:0,y:0},drag:p,pressed:a?u.length>=2:i,...n})},v=(t,n)=>({x:Math.round(t-e.getBoundingClientRect().left),y:Math.round(n-e.getBoundingClientRect().top-o.document.documentElement.scrollTop)}),y=e=>v(e.pageX,e.pageY),x=()=>{p={x:0,y:0},m={x:0,y:0},d&&clearTimeout(d),d=setTimeout(()=>d=null,n)},f=()=>{d&&(clearTimeout(d),d=null)},g=()=>{let e=0;return d&&(f(),e=Math.abs(p.x)<s&&Math.abs(p.y)<s),p={x:0,y:0},m={x:0,y:0},e};if(a){let t=(e,t)=>{for(let n in e.changedTouches)if(e.changedTouches[n].identifier==t)return o(e,n);return null},o=(e,t)=>{let o=e.changedTouches[t];return{id:o.identifier,x:o.pageX,y:o.pageY}},n=t=>{c&&t.target!=e&&!u.length&&(c=!1,h("leave"),r("touchstart",n),r("touchmove",s),r("touchend",a),r("touchcancel ",a))},s=e=>{if(u.length){if(1==u.length){let o=u[0],n=t(e,o.id);if(!n)return;e.preventDefault();let s=n.x-o.x,l=n.y-o.y;m.x+=s,m.y+=l,h("move",{move:{x:s,y:l},pos:v(n.x,n.y)}),h("tdrag",{move:{x:s,y:l},drag:m,pos:v(n.x,n.y)}),f()}else{let o=[0,0],n=[0,0],s=0;for(let l in o)n[l]=u[l],o[l]=t(e,n[l].id),o[l]?s=1:o[l]=n[l];if(s){e.preventDefault();let t=(o[0].x+o[1].x)/2,s=(o[0].y+o[1].y)/2,l=t-(n[0].x+n[1].x)/2,r=s-(n[0].y+n[1].y)/2;p.x+=l,p.y+=r,h("drag",{move:{x:l,y:r},pos:v(t,s)});let a=Math.abs(o[0].x-o[1].x),i=Math.abs(o[0].y-o[1].y),u=Math.abs(n[0].x-n[1].x),d=Math.abs(n[0].y-n[1].y);h("zoom",{zoom:Math.hypot(a,i)-Math.hypot(u,d),pos:v(t,s)})}}for(let o in u){let n=t(e,u[o].id);n&&(u[o]=n)}}},a=e=>{if(u.length){let t=o(e,0);if(!t)return;let n=u.findIndex(e=>t.id==e.id);~n&&(e.preventDefault(),u.splice(n,1),u.length||(h("trelease",{pos:v(t.x,t.y)}),g()&&h("click",{pos:v(t.x,t.y)})),1==u.length&&h("release",{pos:v(t.x,t.y)}))}};e.addEventListener("touchstart",e=>{e.preventDefault();let t=o(e,0);if(!t)return;let r=u.findIndex(e=>t.id==e.id);~r&&u.splice(r,1),u.unshift(t),1==u.length&&(x(),c||(c=!0,l("touchstart",n,{passive:!1}),l("touchmove",s,{passive:!1}),l("touchend",a),l("touchcancel ",a),h("enter",{pos:v(t.x,t.y)})),h("tpress",{pos:v(t.x,t.y)})),2==u.length&&(h("press",{pos:v(t.x,t.y)}),f())},{passive:!1})}else{let t=()=>{r("mousemove",n),r("mouseup",s)},o=()=>{l("mousemove",n),l("mouseup",s)},n=e=>{i&&(e.preventDefault(),p.x+=e.movementX,p.y+=e.movementY,h("drag",{move:{x:e.movementX,y:e.movementY},pos:y(e)}))},s=o=>{i&&(o.preventDefault(),i=0,h("release",{pos:y(o)}),g()&&h("click",{pos:y(o)}),o.target!==e&&t())};e.addEventListener("mouseenter",e=>{h("enter",{pos:y(e)}),o()}),e.addEventListener("mouseleave",e=>{h("leave",{pos:y(e)}),i||t()}),e.addEventListener("mousedown",e=>{i||(o(),e.preventDefault(),i=1,x(),h("press",{pos:y(e)}))}),e.addEventListener("mousemove",e=>{i||h("move",{move:{x:e.movementX,y:e.movementY},pos:y(e)})}),e.addEventListener("wheel",e=>{e.preventDefault(),h("zoom",{zoom:-e.deltaY/100,pos:y(e)})},{passive:!1})}}e.d(t,{A:()=>o});const n=t.A;export{n as default};