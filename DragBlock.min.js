var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function o(e,t,o=window,n=300,s=5){const l="ontouchstart"in o.document.documentElement;let r=0,a=[],u=null,i={x:0,y:0},d=!1,p=(...e)=>o.document.addEventListener(...e),m=(...e)=>o.document.removeEventListener(...e),v=(e,o)=>{t({type:e,touch:l,move:{x:0,y:0},pos:{x:0,y:0},drag:i,pressed:l?a.length>=2:r,...o})},c=(t,n)=>({x:Math.round(t-e.getBoundingClientRect().left),y:Math.round(n-e.getBoundingClientRect().top-o.document.documentElement.scrollTop)}),h=e=>c(e.pageX,e.pageY),y=()=>{i={x:0,y:0},u&&clearTimeout(u),u=setTimeout((()=>u=null),n)},x=()=>{u&&(clearTimeout(u),u=null)},f=()=>{let e=0;return u&&(x(),e=Math.abs(i.x)<s&&Math.abs(i.y)<s),i={x:0,y:0},e};if(l){let t=(e,t)=>{for(let n in e.changedTouches)if(e.changedTouches[n].identifier==t)return o(e,n);return null},o=(e,t)=>{let o=e.changedTouches[t];return{id:o.identifier,x:o.pageX,y:o.pageY}},n=t=>{d&&t.target!=e&&!a.length&&(d=!1,v("leave"),m("touchstart",n),m("touchmove",s),m("touchend",l),m("touchcancel ",l))},s=e=>{if(a.length){if(1==a.length){let o=a[0],n=t(e,o.id);if(!n)return;e.preventDefault(),v("move",{move:{x:n.x-o.x,y:n.y-o.y},pos:c(n.x,n.y)}),x()}else{let o=[0,0],n=[0,0],s=0;for(let l in o)n[l]=a[l],o[l]=t(e,n[l].id),o[l]?s=1:o[l]=n[l];if(s){e.preventDefault();let t=(o[0].x+o[1].x)/2,s=(o[0].y+o[1].y)/2,l=t-(n[0].x+n[1].x)/2,r=s-(n[0].y+n[1].y)/2;i.x+=l,i.y+=r,v("drag",{move:{x:l,y:r},pos:c(t,s)});let a=Math.abs(o[0].x-o[1].x),u=Math.abs(o[0].y-o[1].y),d=Math.abs(n[0].x-n[1].x),p=Math.abs(n[0].y-n[1].y);v("zoom",{zoom:Math.hypot(a,u)-Math.hypot(d,p),pos:c(t,s)})}}for(let o in a){let n=t(e,a[o].id);n&&(a[o]=n)}}},l=e=>{if(a.length){let t=o(e,0);if(!t)return;let n=a.findIndex((e=>t.id==e.id));~n&&(e.preventDefault(),a.splice(n,1),a.length||(v("trelease",{pos:c(t.x,t.y)}),f()&&v("click",{pos:c(t.x,t.y)})),1==a.length&&v("release",{pos:c(t.x,t.y)}))}};e.addEventListener("touchstart",(e=>{e.preventDefault();let t=o(e,0);if(!t)return;let r=a.findIndex((e=>t.id==e.id));~r&&a.splice(r,1),a.unshift(t),1==a.length&&(y(),d||(d=!0,p("touchstart",n,{passive:!1}),p("touchmove",s,{passive:!1}),p("touchend",l),p("touchcancel ",l),v("enter",{pos:c(t.x,t.y)})),v("tpress",{pos:c(t.x,t.y)})),2==a.length&&(v("press",{pos:c(t.x,t.y)}),x())}),{passive:!1})}else{let t=()=>{m("mousemove",n),m("mouseup",s)},o=()=>{p("mousemove",n),p("mouseup",s)},n=e=>{r&&(e.preventDefault(),i.x+=e.movementX,i.y+=e.movementY,v("drag",{move:{x:e.movementX,y:e.movementY},pos:h(e)}))},s=o=>{r&&(o.preventDefault(),r=0,v("release",{pos:h(o)}),f()&&v("click",{pos:h(o)}),o.target!==e&&t())};e.addEventListener("mouseenter",(e=>{v("enter",{pos:h(e)}),o()})),e.addEventListener("mouseleave",(e=>{v("leave",{pos:h(e)}),r||t()})),e.addEventListener("mousedown",(e=>{r||(o(),e.preventDefault(),r=1,y(),v("press",{pos:h(e)}))})),e.addEventListener("mousemove",(e=>{r||v("move",{move:{x:e.movementX,y:e.movementY},pos:h(e)})})),e.addEventListener("wheel",(e=>{e.preventDefault(),v("zoom",{zoom:-e.deltaY/100,pos:h(e)})}),{passive:!1})}}e.d(t,{A:()=>o});var n=t.A;export{n as default};