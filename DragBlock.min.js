var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function n(e,t,n=window,o=300,r=5){const s="ontouchstart"in n.document.documentElement;let a=0,d=[],l=null,u={x:0,y:0},i=!1,m=(e,n)=>{t({type:e,touch:s,move:{x:0,y:0},pos:{x:0,y:0},drag:u,pressed:s?d.length>=2:a,...n})},v=(t,o)=>({x:Math.round(t-e.getBoundingClientRect().left),y:Math.round(o-e.getBoundingClientRect().top-n.document.documentElement.scrollTop)}),c=e=>v(e.pageX,e.pageY),p=()=>{u={x:0,y:0},l&&clearTimeout(l),l=setTimeout((()=>l=null),o)},h=()=>{l&&(clearTimeout(l),l=null)},y=()=>{let e=0;return l&&(h(),e=Math.abs(u.x)<r&&Math.abs(u.y)<r),u={x:0,y:0},e};if(s){let t=(e,t)=>{for(let n in e.changedTouches)if(e.changedTouches[n].identifier==t)return o(e,n);return null},o=(e,t)=>{let n=e.changedTouches[t];return{id:n.identifier,x:n.pageX,y:n.pageY}},r=t=>{i&&t.target!=e&&!d.length&&(i=!1,m("leave"),n.document.removeEventListener("touchstart",r),n.document.removeEventListener("touchmove",s),n.document.removeEventListener("touchend",a),n.document.removeEventListener("touchcancel ",a))},s=e=>{if(d.length){if(1==d.length){let n=d[0],o=t(e,n.id);if(!o)return;e.preventDefault(),m("move",{move:{x:o.x-n.x,y:o.y-n.y},pos:v(o.x,o.y)}),h()}else{let n=[0,0],o=[0,0],r=0;for(let s in n)o[s]=d[s],n[s]=t(e,o[s].id),n[s]?r=1:n[s]=o[s];if(r){e.preventDefault();let t=(n[0].x+n[1].x)/2,r=(n[0].y+n[1].y)/2,s=t-(o[0].x+o[1].x)/2,a=r-(o[0].y+o[1].y)/2;u.x+=s,u.y+=a,m("drag",{move:{x:s,y:a},pos:v(t,r)});let d=Math.abs(n[0].x-n[1].x),l=Math.abs(n[0].y-n[1].y),i=Math.abs(o[0].x-o[1].x),c=Math.abs(o[0].y-o[1].y);m("zoom",{zoom:Math.hypot(d,l)-Math.hypot(i,c),pos:v(t,r)})}}for(let n in d){let o=t(e,d[n].id);o&&(d[n]=o)}}},a=e=>{if(d.length){let t=o(e,0);if(!t)return;let n=d.findIndex((e=>t.id==e.id));~n&&(e.preventDefault(),d.splice(n,1),d.length||(m("trelease",{pos:v(t.x,t.y)}),y()&&m("click",{pos:v(t.x,t.y)})),1==d.length&&m("release",{pos:v(t.x,t.y)}))}};e.addEventListener("touchstart",(e=>{e.preventDefault();let t=o(e,0);if(!t)return;let l=d.findIndex((e=>t.id==e.id));~l&&d.splice(l,1),d.unshift(t),1==d.length&&(p(),i||(i=!0,n.document.addEventListener("touchstart",r,{passive:!1}),n.document.addEventListener("touchmove",s,{passive:!1}),n.document.addEventListener("touchend",a),n.document.addEventListener("touchcancel ",a),m("enter",{pos:v(t.x,t.y)})),m("tpress",{pos:v(t.x,t.y)})),2==d.length&&(m("press",{pos:v(t.x,t.y)}),h())}),{passive:!1})}else{let t=()=>{n.document.removeEventListener("mousemove",r),n.document.removeEventListener("mouseup",s)},o=()=>{n.document.addEventListener("mousemove",r),n.document.addEventListener("mouseup",s)},r=e=>{a&&(e.preventDefault(),u.x+=e.movementX,u.y+=e.movementY,m("drag",{move:{x:e.movementX,y:e.movementY},pos:c(e)}))},s=n=>{a&&(n.preventDefault(),a=0,m("release",{pos:c(n)}),y()&&m("click",{pos:c(n)}),n.target!==e&&t())};e.addEventListener("mouseenter",(e=>{m("enter",{pos:c(e)}),o()})),e.addEventListener("mouseleave",(e=>{m("leave",{pos:c(e)}),a||t()})),e.addEventListener("mousedown",(e=>{a||(o(),e.preventDefault(),a=1,p(),m("press",{pos:c(e)}))})),e.addEventListener("mousemove",(e=>{a||m("move",{move:{x:e.movementX,y:e.movementY},pos:c(e)})})),e.addEventListener("wheel",(e=>{e.preventDefault(),m("zoom",{zoom:-e.deltaY/100,pos:c(e)})}),{passive:!1})}}e.d(t,{A:()=>n});var o=t.A;export{o as default};