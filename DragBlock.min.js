var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function o(e,t,o=window,n=300,s=5){let l=(...e)=>o.document.addEventListener(...e),r=(...e)=>o.document.removeEventListener(...e);const a="ontouchstart"in o.document.documentElement;let u=0,i=[],d=null,p={x:0,y:0},m={x:0,y:0},c=!1,v=(e,o)=>{t({type:e,touch:a,move:{x:0,y:0},pos:{x:0,y:0},drag:p,pressed:a?i.length>=2:u,...o})},y=(t,n)=>({x:Math.round(t-e.getBoundingClientRect().left),y:Math.round(n-e.getBoundingClientRect().top-o.document.documentElement.scrollTop)}),h=e=>y(e.pageX,e.pageY),x=()=>{p={x:0,y:0},m={x:0,y:0},d&&clearTimeout(d),d=setTimeout(()=>d=null,n)},f=()=>{d&&(clearTimeout(d),d=null)},g=()=>{let e=0;return d&&(f(),e=Math.abs(p.x)<s&&Math.abs(p.y)<s),p={x:0,y:0},m={x:0,y:0},e};if(a){let t=(e,t)=>{for(let n in e.changedTouches)if(e.changedTouches[n].identifier==t)return o(e,n);return null},o=(e,t)=>{let o=e.changedTouches[t];return{id:o.identifier,x:o.pageX,y:o.pageY}},n=t=>{c&&t.target!=e&&!i.length&&(c=!1,v("leave"),r("touchstart",n),r("touchmove",s),r("touchend",a),r("touchcancel ",a))},s=e=>{if(i.length){if(1==i.length){let o=i[0],n=t(e,o.id);if(!n)return;e.preventDefault();let s=n.x-o.x,l=n.y-o.y;m.x+=s,m.y+=l,v("move",{move:{x:s,y:l},pos:y(n.x,n.y)}),v("tdrag",{drag:m,pos:y(n.x,n.y)}),f()}else{let o=[0,0],n=[0,0],s=0;for(let l in o)n[l]=i[l],o[l]=t(e,n[l].id),o[l]?s=1:o[l]=n[l];if(s){e.preventDefault();let t=(o[0].x+o[1].x)/2,s=(o[0].y+o[1].y)/2,l=t-(n[0].x+n[1].x)/2,r=s-(n[0].y+n[1].y)/2;p.x+=l,p.y+=r,v("drag",{move:{x:l,y:r},pos:y(t,s)});let a=Math.abs(o[0].x-o[1].x),u=Math.abs(o[0].y-o[1].y),i=Math.abs(n[0].x-n[1].x),d=Math.abs(n[0].y-n[1].y);v("zoom",{zoom:Math.hypot(a,u)-Math.hypot(i,d),pos:y(t,s)})}}for(let o in i){let n=t(e,i[o].id);n&&(i[o]=n)}}},a=e=>{if(i.length){let t=o(e,0);if(!t)return;let n=i.findIndex(e=>t.id==e.id);~n&&(e.preventDefault(),i.splice(n,1),i.length||(v("trelease",{pos:y(t.x,t.y)}),g()&&v("click",{pos:y(t.x,t.y)})),1==i.length&&v("release",{pos:y(t.x,t.y)}))}};e.addEventListener("touchstart",e=>{e.preventDefault();let t=o(e,0);if(!t)return;let r=i.findIndex(e=>t.id==e.id);~r&&i.splice(r,1),i.unshift(t),1==i.length&&(x(),c||(c=!0,l("touchstart",n,{passive:!1}),l("touchmove",s,{passive:!1}),l("touchend",a),l("touchcancel ",a),v("enter",{pos:y(t.x,t.y)})),v("tpress",{pos:y(t.x,t.y)})),2==i.length&&(v("press",{pos:y(t.x,t.y)}),f())},{passive:!1})}else{let t=()=>{r("mousemove",n),r("mouseup",s)},o=()=>{l("mousemove",n),l("mouseup",s)},n=e=>{u&&(e.preventDefault(),p.x+=e.movementX,p.y+=e.movementY,v("drag",{move:{x:e.movementX,y:e.movementY},pos:h(e)}))},s=o=>{u&&(o.preventDefault(),u=0,v("release",{pos:h(o)}),g()&&v("click",{pos:h(o)}),o.target!==e&&t())};e.addEventListener("mouseenter",e=>{v("enter",{pos:h(e)}),o()}),e.addEventListener("mouseleave",e=>{v("leave",{pos:h(e)}),u||t()}),e.addEventListener("mousedown",e=>{u||(o(),e.preventDefault(),u=1,x(),v("press",{pos:h(e)}))}),e.addEventListener("mousemove",e=>{u||v("move",{move:{x:e.movementX,y:e.movementY},pos:h(e)})}),e.addEventListener("wheel",e=>{e.preventDefault(),v("zoom",{zoom:-e.deltaY/100,pos:h(e)})},{passive:!1})}}e.d(t,{A:()=>o});const n=t.A;export{n as default};